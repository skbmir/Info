# **Установка ROS Kinetic**

http://wiki.ros.org - справка по ROS

---------------------------------
## **Добавление репозитория ROS**

1. Добавляем ссылку на репозиторий в список репозиториев системы

```
sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'
```

2. Добавляем ключ репозитория, чтобы система поняля, что репозиторию можно доверять

```
sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116
```

Если в процессе добавления ключа возникнет проблема вроде:

```
gpg: не найдено данных формата OpenPGP.
gpg: Всего обработано: 0
gpg: ошибка связи с сервером ключей: keyserver unreachable
gpg: ошибка связи с сервером ключей: открытый ключ не найден
gpg: сбой при получении с сервера ключей: открытый ключ не найден
```

можно использовать одну из следующих команд:

```
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116

sudo apt-key adv --keyserver hkp://pgp.mit.edu:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116
```

3. Обновляем список пакетов

```
sudo apt update
```

--------------------
## **Установка ROS**

ROS преглагает заготовленные наборы ПО для установки:
- desktop-full - включает большое кол-во нод, симуляторы, средства визуализации и т.п.
- desktop - общий набор нод и средств визуализации
- ros-base - только необходимое ПО для работы ROS, остальное устанавливается по необходимости

Установка:

```
sudo apt install ros-kinetic-desktop-full
```

или

```
sudo apt install ros-kinetic-desktop
```

или

```
sudo apt install ros-kinetic-ros-base
```

-----------
## **Настройка ROS**

1. Инициализация утилиты rosdep для установки зависимостей, нужных для компиляци программ

```
sudo rosdep init
      
rosdep update
```

2. Настройка окружающей среды, чтобы различные утилиты ROS и ноды можно было запускать из терминала

```
echo "source /opt/ros/kinetic/setup.bash" >> ~/.bashrc

source ~/.bashrc
```

3. Установка утилит для сборки пакетов ROS

```
sudo apt install python-rosinstall python-rosinstall-generator python-wstools build-essential
```

-----------------------------
## **Создание вашего рабочего пространства**

Рабочее пространство представляет собой папку, в которой будут храниться разработанные вами пакеты для ROS и сторонние пакеты, например, загруженные с github.com. Компиляция пакетов в ROS производится автоматически с помощью утилиты Catkin.

Создание папки для рабочего пространства в домашнем каталоге пользователя (/home/имя_пользователя)

```
cd ~/ # Перейти в домашнюю папку вашего пользователя

mkdir -p catkin_ws/src # Создать папку src в папке catkin_ws
```

mkdir - команда создания папки, флаг -p указывает, что необходимо создать директорию src и все родительские директории (т.е. директорию catkin_ws) если они не существуют. Без этого флага будет выведена ошибка о несуществующем каталоге catkin_ws.

Папка catkin_ws является основной папкой вашего рабочего пространства.

В папке src хранятся исходные коды пакетов ROS созданных вами или сторонних пакетов.

Прейдем в созданную папку

```
cd catkin_ws
```

Выполним инициализацию рабочего места

```
catkin_make
```

После этого для последующей компиляции всех пакетов необходимо будет перейти в папку с вашим рабочи местом и запустить команду catkin_make.

```
cd ~/catkin_ws

catkin_make
```

Чтобы иметь возможность запускать ноды из пакетов, находящихся в вашем рабочем пространстве необходимо указать ROS, где их найти.

```
cd ~/catkin_ws

source devel/setup.bash
```

Это позволить запустить нужные ноды только из текущего терминала.

По желанию можно сделать так, чтобы данная операция выполнялась каждый раз когда вы открываете терминал.

```
echo "source /home/имя_пользователя/catkin_ws/devel/setup.bash" >> ~/.bashrc
```
